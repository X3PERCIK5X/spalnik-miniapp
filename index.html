<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <title>–°–ø–∞–ª—å–Ω–∏–∫ ‚Äî –ú–µ–Ω—é</title>

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <header class="topbar">
    <div class="topbar-left">
      <img class="topbar-logo" src="logo.jpeg" alt="–°–ø–∞–ª—å–Ω–∏–∫" />
    </div>

    <!-- –ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
    <button id="cartButton" class="cart-button">
      üß∫ <span id="cartCount">0</span>
    </button>
  </header>

  <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
  <div id="categories" class="categories"></div>

  <!-- –ú–µ–Ω—é -->
  <main id="menu" class="menu"></main>

  <!-- –ö–û–†–ó–ò–ù–ê -->
  <div id="cartScreen" class="cart hidden">
    <div class="cart-header">
      <button id="closeCart" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
      <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    </div>

    <div id="cartItems" class="cart-items"></div>

    <div class="cart-form">
      <label>
        –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è *
        <input id="phoneInput" type="text" placeholder="+7..." />
      </label>

      <label>
        –ö –∫–∞–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å *
        <input id="timeInput" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä 19:30" />
      </label>

      <label>
        –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        <input id="commentInput" type="text" placeholder="–ë–µ–∑ –ª—É–∫–∞" />
      </label>
    </div>

    <div class="cart-footer">
      <div class="cart-total">
        –ò—Ç–æ–≥–æ: <span id="totalPrice">0</span> ‚ÇΩ
      </div>
      <div id="statusBox" style="margin-top:10px; opacity:.85; font-size:14px;"></div>
      <button id="sendOrder" class="send-order">
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–∑–∞–∫–∞–∑
      </button>
    </div>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script>
    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–∞–Ω–∞–ª –¥–æ—Å—Ç–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ (Cloudflare Worker)
    window.SPALNIK_API_URL = "https://spalnik-order.2000sanchezperez.workers.dev";
    window.SPALNIK_API_KEY = "spalnik_key_123";
  </script>
  <script>
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–≤–æ–π–Ω–æ–π —Ç–∞–ø (iOS Safari) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞
    let __lastTouchEnd = 0;
    document.addEventListener("touchend", function (e) {
      const now = Date.now();
      if (now - __lastTouchEnd < 300) e.preventDefault();
      __lastTouchEnd = now;
    }, { passive: false });
  </script>
  <script defer src="menu.js?v=20260127-9"></script>
  <script defer src="telegram.js?v=20260127-9"></script>
  <script defer src="cart.js?v=20260127-9"></script>
</body>
</html>
