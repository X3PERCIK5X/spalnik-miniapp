<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <title>–°–ø–∞–ª—å–Ω–∏–∫ ‚Äî –ú–µ–Ω—é</title>

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <header class="topbar">
    <div class="topbar-left">
      <img class="topbar-logo" src="logo.jpeg" alt="–°–ø–∞–ª—å–Ω–∏–∫" />
    </div>

  <div class="topbar-right">
    <button id="historyButton" class="history-button" type="button">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</button>
    <button id="cartButton" class="cart-button" type="button">
      üß∫ <span id="cartCount">0</span>
    </button>
  </div>
  </header>

  <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
  <div class="top-tabs">
    <button id="tabMenu" class="tab-btn active" type="button">–ú–µ–Ω—é</button>
    <button id="tabBooking" class="tab-btn" type="button">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª</button>
  </div>

  <!-- –ú–µ–Ω—é -->
  <section id="menuSection">
    <div id="categories" class="categories"></div>
    <main id="menu" class="menu"></main>
  </section>

  <!-- –ë—Ä–æ–Ω—å -->
  <section id="bookingSection" class="booking hidden">
    <div class="booking-card">
      <div class="booking-title">–ë–†–û–ù–ò–†–û–í–ê–ù–ò–ï –°–¢–û–õ–ê</div>

      <div class="booking-block">
        <label>
          –î–∞—Ç–∞ *
          <input id="bookingDate" type="text" placeholder="–î–î.–ú–ú.–ì–ì–ì–ì" />
        </label>
      </div>

      <div class="booking-block">
        <label>
          –í—Ä–µ–º—è *
          <input id="bookingTime" type="text" placeholder="–ß–ß:–ú–ú" />
        </label>
      </div>

      <div class="booking-block">
        <label>
          –ò–º—è *
          <input id="bookingName" type="text" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è –≥–æ—Å—Ç—è" />
        </label>
        <label>
          –¢–µ–ª–µ—Ñ–æ–Ω *
          <input id="bookingPhone" type="text" placeholder="+7..." />
        </label>
        <label>
          –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π *
          <input id="bookingGuests" type="number" min="1" max="50" placeholder="2" />
        </label>
        <label>
          –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
          <input id="bookingComment" type="text" placeholder="–ü–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é" />
        </label>
      </div>

      <div id="bookingStatus" class="booking-status"></div>
      <button id="bookingSend" class="send-order" type="button">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª</button>
    </div>
  </section>

  <!-- –ö–û–†–ó–ò–ù–ê -->
  <div id="cartScreen" class="cart hidden">
    <div class="cart-header">
      <button id="closeCart" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
      <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    </div>

    <div id="cartItems" class="cart-items"></div>

    <div class="cart-form">
      <label>
        Telegram
        <div id="tgProfile" class="tg-profile">‚Äî</div>
      </label>

      <label>
        –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è *
        <input id="phoneInput" type="text" placeholder="+7..." />
      </label>

      <label>
        –ö –∫–∞–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å *
        <input id="timeInput" type="text" placeholder="–ß–ß:–ú–ú" />
      </label>

      <label>
        –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
        <input id="commentInput" type="text" placeholder="–ë–µ–∑ –ª—É–∫–∞" />
      </label>
    </div>

    <div class="cart-footer">
      <div class="cart-total">
        –ò—Ç–æ–≥–æ: <span id="totalPrice">0</span> ‚ÇΩ
      </div>
      <div id="statusBox" style="margin-top:10px; opacity:.85; font-size:14px;"></div>
      <button id="sendOrder" class="send-order">
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–∑–∞–∫–∞–∑
      </button>
    </div>
  </div>

  <!-- –ú–û–ò –ó–ê–ö–ê–ó–´ -->
  <div id="ordersScreen" class="orders hidden">
    <div class="orders-header">
      <button id="closeOrders" class="back-btn">‚Üê –ù–∞–∑–∞–¥</button>
      <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
    </div>
    <div id="orderHistory" class="order-history"></div>
  </div>

  <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞ -->
  <button id="cartFab" class="cart-fab hidden" type="button">
    <span class="cart-fab-title">–ö–æ—Ä–∑–∏–Ω–∞</span>
    <span class="cart-fab-dot">¬∑</span>
    <span class="cart-fab-total"><span id="cartFabTotal">0</span> ‚ÇΩ</span>
    <span class="cart-fab-count" id="cartFabCount">0</span>
  </button>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script>
    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–∞–Ω–∞–ª –¥–æ—Å—Ç–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ (Cloudflare Worker)
    window.SPALNIK_API_URL = "https://spalnik-order.2000sanchezperez.workers.dev";
    window.SPALNIK_API_KEY = "spalnik_key_123";
  </script>
  <script>
    // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–≤–æ–π–Ω–æ–π —Ç–∞–ø (iOS Safari) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞
    let __lastTouchEnd = 0;
    document.addEventListener("touchend", function (e) {
      const now = Date.now();
      if (now - __lastTouchEnd < 300) e.preventDefault();
      __lastTouchEnd = now;
    }, { passive: false });
  </script>
  <script defer src="menu.js?v=20260128-33"></script>
  <script defer src="telegram.js?v=20260128-33"></script>
  <script defer src="cart.js?v=20260128-33"></script>
</body>
</html>
